<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clusterfile Editor</title>
    <link rel="stylesheet" href="/static/vendor/patternfly.min.css">
    <link rel="stylesheet" href="/static/vendor/codemirror.min.css">
    <link rel="stylesheet" href="/static/vendor/codemirror-lint.min.css">
    <link rel="stylesheet" href="/static/vendor/codemirror-foldgutter.css">
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body class="pf-c-page">
    <header class="pf-c-page__header">
        <div class="pf-c-page__header-brand">
                        <a class="pf-c-page__header-brand-link" href="#">
                            <span class="pf-c-brand">Clusterfile Editor</span>
                            <span class="app-version" id="app-version" role="button" tabindex="0" title="View changelog">v1.0.3</span>
                        </a>
        </div>
        <div class="pf-c-page__header-tools">
            <div class="pf-c-page__header-tools-group">
                <div class="header-status">
                    <span id="header-filename">untitled</span>
                    <span id="header-changes" class="header-badge" title="Pending changes"><svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg> <span id="changes-count">0</span></span>
                    <span id="header-errors" class="header-badge header-badge-error" title="Validation errors"><svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg> <span id="errors-count">0</span></span>
                </div>
                <div class="header-controls">
                    <select id="samples-select" class="pf-c-form-control" title="Load sample clusterfile">
                        <option value="">Load Sample...</option>
                    </select>
                    <button id="btn-new" class="pf-c-button pf-m-secondary" type="button">New</button>
                    <button id="btn-load" class="pf-c-button pf-m-secondary" type="button">Load</button>
                    <button id="btn-save" class="pf-c-button pf-m-primary" type="button">Save</button>
                    <button id="btn-download" class="pf-c-button pf-m-secondary" type="button">Download</button>
                    <input type="file" id="file-input" accept=".yaml,.yml,.clusterfile,text/yaml,application/x-yaml" style="display: none;">
                </div>
            </div>
        </div>
    </header>

    <div class="pf-c-page__sidebar">
        <div class="pf-c-page__sidebar-body">
            <nav class="pf-c-nav nav-shell" aria-label="Global">
                <ul class="pf-c-nav__list">
                    <li class="pf-c-nav__item">
                        <a href="#" class="pf-c-nav__link pf-m-current" data-section="account">Account</a>
                    </li>
                    <li class="pf-c-nav__item">
                        <a href="#" class="pf-c-nav__link" data-section="cluster">Cluster</a>
                    </li>
                    <li class="pf-c-nav__item">
                        <a href="#" class="pf-c-nav__link" data-section="network">Network</a>
                    </li>
                    <li class="pf-c-nav__item">
                        <a href="#" class="pf-c-nav__link" data-section="hosts">Hosts</a>
                    </li>
                    <li class="pf-c-nav__item">
                        <a href="#" class="pf-c-nav__link" data-section="plugins">Plugins</a>
                    </li>
                    <li class="pf-c-nav__item pf-m-separator"></li>
                    <li class="pf-c-nav__item">
                        <a href="#" class="pf-c-nav__link" data-section="templates">Templates</a>
                    </li>
                </ul>
                <ul class="pf-c-nav__list nav-footer">
                    <li class="pf-c-nav__item pf-m-separator"></li>
                    <li class="pf-c-nav__item">
                        <a href="#" class="pf-c-nav__link" data-section="changelog">Changelog</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <main class="pf-c-page__main">
        <div class="main-content">
            <div class="split-pane">
                <div class="form-pane" id="form-pane">
                    <div class="form-header">
                        <h2 id="section-title">Account</h2>
                        <div class="form-actions">
                            <button id="btn-revert-section" class="pf-c-button pf-m-link pf-m-small" type="button" title="Revert section changes">Revert Section</button>
                            <button id="btn-revert-all" class="pf-c-button pf-m-link pf-m-small" type="button" title="Revert all changes">Revert All</button>
                        </div>
                    </div>
                    <div id="form-container" class="form-container"></div>
                    <div id="templates-container" class="templates-container" style="display: none;">
                        <div class="templates-section">
                            <h3>Template Rendering</h3>
                            <p class="templates-description">Render OpenShift manifests and other content from your clusterfile using Jinja2 templates.</p>
                            
                            <div class="template-form">
                                <div class="form-group">
                                    <label>Select Template</label>
                                    <select id="template-select" class="pf-c-form-control">
                                        <option value="">-- Select a template --</option>
                                    </select>
                                    <div id="template-description" class="field-description"></div>
                                </div>
                                
                                <div class="form-group">
                                    <label>JSONPath Parameter Overrides</label>
                                    <div id="params-container" class="params-container">
                                        <div class="param-row">
                                            <input type="text" class="param-path" placeholder="$.hosts[*].bmc.username" title="JSONPath expression">
                                            <input type="text" class="param-value" placeholder="new-value" title="Value to set">
                                            <button class="remove-param-btn pf-c-button pf-m-plain" type="button" title="Remove">X</button>
                                        </div>
                                    </div>
                                    <button id="add-param-btn" class="pf-c-button pf-m-link" type="button">+ Add Parameter Override</button>
                                    <div class="field-description">Use JSONPath expressions to override values in the clusterfile before rendering. Example: $.hosts[*].bmc.username=admin</div>
                                </div>
                                
                                <div class="template-actions">
                                    <button id="btn-render" class="pf-c-button pf-m-primary" type="button">Render Template</button>
                                    <button id="btn-preview-template" class="pf-c-button pf-m-secondary" type="button">Preview Template Source</button>
                                </div>
                            </div>
                            
                            <div class="template-output" style="display: none;">
                                <div class="output-header">
                                    <h4>Rendered Output</h4>
                                    <div class="output-actions">
                                        <button id="btn-copy-output" class="pf-c-button pf-m-link pf-m-small" type="button">Copy</button>
                                        <button id="btn-download-output" class="pf-c-button pf-m-link pf-m-small" type="button">Download</button>
                                    </div>
                                </div>
                                <div id="template-output-editor"></div>
                                <div id="template-warnings" class="template-warnings"></div>
                            </div>
                        </div>
                    </div>
                    <div id="changelog-container" class="changelog-container" style="display: none;">
                        <h3>Changelog</h3>
                        <pre id="changelog-content" class="changelog-content">Loading...</pre>
                    </div>
                </div>
                <div class="editor-pane" id="editor-pane">
                    <div class="yaml-editor-container">
                        <div class="editor-header">
                            <span>YAML Editor</span>
                            <div class="editor-actions">
                                <button id="btn-format" class="pf-c-button pf-m-link pf-m-small" type="button">Format</button>
                                <button id="btn-copy" class="pf-c-button pf-m-link pf-m-small" type="button">Copy</button>
                            </div>
                        </div>
                        <div id="yaml-editor"></div>
                    </div>
                    <div class="tabs-container">
                        <ul class="pf-c-tabs__list" role="tablist">
                            <li class="pf-c-tabs__item pf-m-current" role="presentation">
                                <button class="pf-c-tabs__link" id="tab-validation" role="tab" aria-selected="true" data-tab="validation">Validation</button>
                            </li>
                            <li class="pf-c-tabs__item" role="presentation">
                                <button class="pf-c-tabs__link" id="tab-errors" role="tab" aria-selected="false" data-tab="errors">Errors/Debug</button>
                            </li>
                            <li class="pf-c-tabs__item" role="presentation">
                                <button class="pf-c-tabs__link" id="tab-changes" role="tab" aria-selected="false" data-tab="changes">Changes</button>
                            </li>
                            <li class="pf-c-tabs__item" role="presentation">
                                <button class="pf-c-tabs__link" id="tab-diff" role="tab" aria-selected="false" data-tab="diff">Diff Preview</button>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div id="panel-validation" class="tab-panel active">
                                <div id="validation-results"></div>
                            </div>
                            <div id="panel-errors" class="tab-panel">
                                <div id="error-results"></div>
                            </div>
                            <div id="panel-changes" class="tab-panel">
                                <div id="changes-list"></div>
                            </div>
                            <div id="panel-diff" class="tab-panel">
                                <pre id="diff-preview"></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="help-bubble" class="help-bubble" style="display: none;">
        <div class="help-bubble-header">
            <span class="help-bubble-title">Help</span>
            <div class="help-bubble-controls">
                <button type="button" class="help-bubble-pin" title="Pin"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M14 4v5c0 1.12.37 2.16 1 3H9c.65-.86 1-1.9 1-3V4h4m3-2H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3V4h1c.55 0 1-.45 1-1s-.45-1-1-1z"/></svg></button>
                <button type="button" class="help-bubble-close" title="Close"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button>
            </div>
        </div>
        <div class="help-bubble-body">
            <p id="help-description"></p>
            <div id="help-links"></div>
        </div>
    </div>

    <div id="tour-modal" class="pf-c-modal-box" style="display: none;">
        <div class="pf-c-modal-box__body">
            <h2>Welcome to Clusterfile Editor</h2>
            <p>This editor helps you create and manage OpenShift cluster configuration files.</p>
            <ul>
                <li><strong>Guided Mode:</strong> Use the form on the left to edit your configuration</li>
                <li><strong>Advanced Mode:</strong> Edit YAML directly in the editor</li>
                <li><strong>Navigation:</strong> Use the left sidebar to switch between sections</li>
                <li><strong>Validation:</strong> Real-time validation shows errors in the bottom panel</li>
                <li><strong>Help:</strong> Hover over field labels for documentation</li>
            </ul>
            <button id="tour-close" class="pf-c-button pf-m-primary">Get Started</button>
            <label><input type="checkbox" id="tour-dont-show"> Don't show again</label>
        </div>
    </div>

    <script src="/static/vendor/codemirror.min.js"></script>
    <script src="/static/vendor/codemirror-yaml.min.js"></script>
    <script src="/static/vendor/codemirror-foldcode.min.js"></script>
    <script src="/static/vendor/codemirror-foldgutter.min.js"></script>
    <script src="/static/vendor/codemirror-indent-fold.min.js"></script>
    <script src="/static/vendor/js-yaml.min.js"></script>
    <script src="/static/vendor/ajv.min.js"></script>
    <script src="/static/vendor/diff.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
