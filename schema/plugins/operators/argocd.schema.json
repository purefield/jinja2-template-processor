{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Operators Plugin",
  "description": "Day-2 operator installation and configuration. Each key is an operator name with its config. Specify an operator key with {} to install with all defaults.",
  "type": "object",
  "properties": {
    "argocd": {
      "title": "ArgoCD / OpenShift GitOps",
      "description": "Installs openshift-gitops-operator and configures an ArgoCD instance. Specify {} for all defaults.",
      "type": "object",
      "properties": {
        "enabled": {
          "title": "Enabled",
          "type": "boolean",
          "default": true,
          "description": "Set false to skip ArgoCD installation."
        },
        "channel": {
          "title": "Channel",
          "type": "string",
          "default": "latest",
          "description": "OLM subscription channel (e.g. latest, gitops-1.14)."
        },
        "approval": {
          "title": "Install Plan Approval",
          "type": "string",
          "enum": ["Automatic", "Manual"],
          "default": "Automatic"
        },
        "ha": {
          "title": "High Availability",
          "type": "boolean",
          "default": false,
          "description": "Enable HA for ArgoCD components (repo-server, application-controller)."
        },
        "rbac": {
          "title": "RBAC Configuration",
          "type": "object",
          "properties": {
            "policy": {
              "title": "Policy CSV",
              "type": "string",
              "default": "g, system:cluster-admins, role:admin",
              "description": "ArgoCD RBAC policy CSV. Default grants admin to cluster-admins group."
            },
            "defaultPolicy": {
              "title": "Default Policy",
              "type": "string",
              "default": "role:readonly",
              "description": "Default role for authenticated users without explicit policy."
            },
            "scopes": {
              "title": "Scopes",
              "type": "string",
              "default": "[groups]",
              "description": "OIDC scopes to use for RBAC."
            }
          },
          "additionalProperties": false
        },
        "repo": {
          "title": "Repo Server",
          "type": "object",
          "properties": {
            "resources": {
              "title": "Resource Limits",
              "type": "object",
              "properties": {
                "cpu": { "type": "string", "default": "1" },
                "memory": { "type": "string", "default": "1Gi" }
              }
            }
          },
          "additionalProperties": true
        },
        "notifications": {
          "title": "Notifications",
          "type": "boolean",
          "default": true,
          "description": "Enable ArgoCD notifications controller."
        },
        "applicationSet": {
          "title": "ApplicationSet",
          "type": "boolean",
          "default": true,
          "description": "Enable ApplicationSet controller."
        },
        "bootstrap": {
          "title": "Bootstrap Application",
          "description": "GitOps bootstrap: an ArgoCD Application that manages further operators and cluster config from a git repo (app-of-apps pattern).",
          "type": "object",
          "properties": {
            "repoURL": {
              "title": "Repository URL",
              "type": "string",
              "description": "Git repository URL containing operator/config manifests."
            },
            "path": {
              "title": "Path",
              "type": "string",
              "default": ".",
              "description": "Path within the repo to the manifests directory."
            },
            "targetRevision": {
              "title": "Target Revision",
              "type": "string",
              "default": "HEAD",
              "description": "Git branch, tag, or commit (e.g. main, v1.0, HEAD)."
            },
            "namespace": {
              "title": "Destination Namespace",
              "type": "string",
              "default": "openshift-gitops",
              "description": "Namespace where bootstrapped resources are created."
            },
            "autoSync": {
              "title": "Auto Sync",
              "type": "boolean",
              "default": true,
              "description": "Enable automated sync with self-healing and pruning."
            }
          },
          "required": ["repoURL"],
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}
