{
  "title": "Clusterfile",
  "description": "Configuration file for OpenShift cluster installation using the Agent-based Installer.",
  "type": "object",
  "$defs": {
    "ipv4": {
      "type": "string",
      "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
    },
    "ipv6": {
      "type": "string",
      "pattern": "^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^([0-9a-fA-F]{1,4}:){1,7}:$|^([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}$|^([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}$|^([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}$|^([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}$|^([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}$|^[0-9a-fA-F]{1,4}:(:[0-9a-fA-F]{1,4}){1,6}$|^:(:[0-9a-fA-F]{1,4}){1,7}$|^::$"
    },
    "ipAddress": {
      "anyOf": [
        { "$ref": "#/$defs/ipv4" },
        { "$ref": "#/$defs/ipv6" }
      ]
    },
    "cidrv4": {
      "type": "string",
      "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/([0-9]|[1-2][0-9]|3[0-2])$"
    },
    "cidrv6": {
      "type": "string",
      "pattern": "^([0-9a-fA-F:]+)/([0-9]|[1-9][0-9]|1[0-2][0-8])$"
    },
    "cidr": {
      "anyOf": [
        { "$ref": "#/$defs/cidrv4" },
        { "$ref": "#/$defs/cidrv6" }
      ]
    },
    "macAddress": {
      "type": "string",
      "pattern": "^([0-9A-Fa-f]{2}[:-]){5}[0-9A-Fa-f]{2}$"
    },
    "fqdn": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$",
      "maxLength": 253
    },
    "dnsLabel": {
      "type": "string",
      "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$",
      "maxLength": 63
    },
    "semver": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9.]+)?(\\+[a-zA-Z0-9.]+)?$"
    },
    "proxyUrl": {
      "type": "string",
      "pattern": "^https?://[^\\s]+$"
    },
    "registryUrl": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9.-]*(:[0-9]+)?(/[a-zA-Z0-9._-]+)*$"
    },
    "interfaceName": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9:._-]{0,63}$"
    },
    "devicePath": {
      "type": "string",
      "pattern": "^/dev/[a-zA-Z0-9/_-]+$"
    },
    "bondMode": {
      "type": "string",
      "enum": ["balance-rr", "active-backup", "balance-xor", "broadcast", "802.3ad", "balance-tlb", "balance-alb"]
    },
    "vlanId": {
      "type": "integer",
      "minimum": 1,
      "maximum": 4094
    },
    "mtuPreset": {
      "type": "integer",
      "enum": [1500, 9000]
    },
    "mtuCustom": {
      "type": "integer",
      "minimum": 576,
      "maximum": 9216
    },
    "machineSpec": {
      "type": "object",
      "properties": {
        "cpus": {
          "title": "CPUs",
          "type": "integer",
          "minimum": 1,
          "description": "CPU cores per socket."
        },
        "sockets": {
          "title": "Sockets",
          "type": "integer",
          "minimum": 1,
          "default": 1,
          "description": "Number of CPU sockets. Total vCPUs = cpus Ã— sockets."
        },
        "memory": {
          "title": "Memory",
          "type": "integer",
          "minimum": 1,
          "description": "Memory in GiB."
        },
        "storage": {
          "title": "Storage",
          "type": "object",
          "properties": {
            "os": {
              "title": "OS Disk",
              "type": "integer",
              "minimum": 1,
              "description": "OS disk size in GiB."
            },
            "data": {
              "title": "Data Disks",
              "type": "array",
              "items": { "type": "integer", "minimum": 1 },
              "description": "Data disk sizes in GiB."
            }
          },
          "additionalProperties": true,
          "description": "Disk storage specification."
        }
      },
      "additionalProperties": true,
      "description": "Machine resource specification."
    }
  },
  "properties": {
    "account": {
      "title": "Account",
      "type": "object",
      "properties": {
        "pullSecret": {
          "title": "Pull Secret",
          "type": "string",
          "minLength": 1,
          "description": "Path to file containing Red Hat pull secret JSON for registry authentication.",
          "x-is-file": true,
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-obtaining-installer_installing-bare-metal"
        }
      },
      "required": ["pullSecret"],
      "additionalProperties": true,
      "description": "Red Hat account credentials for cluster registration."
    },
    "cluster": {
      "title": "Cluster",
      "type": "object",
      "properties": {
        "version": {
          "title": "OpenShift Version",
          "anyOf": [
            {
              "type": "string",
              "enum": ["4.14.0", "4.15.0", "4.16.0", "4.17.0", "4.18.0", "4.19.0", "4.20.0", "4.21.0"],
              "description": "Select a supported OpenShift release."
            },
            {
              "$ref": "#/$defs/semver",
              "description": "Custom semantic version (x.y.z format)."
            }
          ],
          "description": "OpenShift release version to install.",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/release_notes/ocp-4-20-release-notes.html"
        },
        "name": {
          "title": "Cluster Name",
          "$ref": "#/$defs/dnsLabel",
          "description": "DNS-compatible cluster name (lowercase, hyphens allowed, max 63 chars).",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-configuration-parameters_installing-bare-metal"
        },
        "sshKeys": {
          "title": "SSH Keys",
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1,
            "description": "Path to SSH public key file.",
            "x-is-file": true
          },
          "minItems": 1,
          "description": "SSH public keys for node access (OpenSSH format).",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#ssh-agent-using_installing-bare-metal"
        },
        "location": {
          "title": "Location",
          "type": "string",
          "maxLength": 128,
          "description": "Logical environment identifier for labels and metadata."
        },
        "manifests": {
          "title": "Manifests",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "title": "Manifest Name",
                "type": "string",
                "minLength": 1,
                "maxLength": 253,
                "pattern": "^[a-z0-9]([a-z0-9.-]*[a-z0-9])?$",
                "description": "Identifier for the manifest (DNS subdomain format)."
              },
              "file": {
                "title": "Manifest File",
                "type": "string",
                "minLength": 1,
                "description": "Path to manifest file.",
                "x-is-file": true
              }
            },
            "required": ["name", "file"],
            "additionalProperties": true
          },
          "description": "Extra Kubernetes manifests to apply during installation.",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-user-infra-generate-k8s-manifest-ignition_installing-bare-metal"
        },
        "mirrors": {
          "title": "Image Mirrors",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "source": {
                "title": "Source Registry",
                "$ref": "#/$defs/registryUrl",
                "description": "Original registry to mirror (e.g., quay.io)."
              },
              "prefix": {
                "title": "Mirror Prefix",
                "type": "string",
                "description": "Base path prefix for mirrored images."
              },
              "mirrors": {
                "title": "Mirror URLs",
                "type": "array",
                "items": { "$ref": "#/$defs/registryUrl" },
                "minItems": 1,
                "description": "Alternative registry locations (tried in order)."
              }
            },
            "required": ["source", "mirrors"],
            "additionalProperties": true
          },
          "description": "Registry mirrors for disconnected installations.",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/disconnected_install/installing-mirroring-disconnected.html"
        },
        "disconnected": {
          "title": "Disconnected",
          "type": "boolean",
          "default": false,
          "description": "Air-gapped cluster: disables default OperatorHub catalog sources and enables custom CatalogSources from mirrored operator indexes.",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/disconnected_install/index-disconnected.html"
        },
        "catalogSources": {
          "title": "Catalog Sources",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "title": "Name",
                "type": "string",
                "minLength": 1,
                "maxLength": 253,
                "pattern": "^[a-z0-9]([a-z0-9.-]*[a-z0-9])?$",
                "description": "CatalogSource resource name (DNS subdomain format)."
              },
              "image": {
                "title": "Index Image",
                "type": "string",
                "minLength": 1,
                "description": "Container image for the operator index (e.g., internal-registry.tld/redhat/redhat-operator-index:v4.19)."
              },
              "displayName": {
                "title": "Display Name",
                "type": "string",
                "description": "Human-readable name shown in OperatorHub UI."
              },
              "publisher": {
                "title": "Publisher",
                "type": "string",
                "description": "Publisher name shown in OperatorHub UI."
              }
            },
            "required": ["name", "image"],
            "additionalProperties": true
          },
          "description": "Custom operator catalog sources for disconnected installations. Requires cluster.disconnected: true.",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/disconnected_install/installing-mirroring-disconnected.html"
        },
        "platform": {
          "title": "Platform",
          "anyOf": [
            {
              "type": "string",
              "enum": ["baremetal", "vsphere", "aws", "azure", "gcp", "openstack", "ibmcloud", "nutanix", "kubevirt", "none"],
              "description": "Supported infrastructure platform."
            },
            {
              "type": "string",
              "pattern": "^[a-z]+$",
              "description": "Other platform identifier."
            }
          ],
          "description": "Target infrastructure platform for the cluster.",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/installing/index.html"
        },
        "arch": {
          "title": "Architecture",
          "type": "string",
          "enum": ["x86_64", "aarch64", "ppc64le", "s390x"],
          "default": "x86_64",
          "description": "CPU architecture.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#supported-platforms-for-openshift-clusters_installing-bare-metal"
        },
        "machine": {
          "title": "Machine Resources",
          "type": "object",
          "properties": {
            "control": { "$ref": "#/$defs/machineSpec", "description": "Control plane node defaults." },
            "worker":  { "$ref": "#/$defs/machineSpec", "description": "Worker node defaults." }
          },
          "additionalProperties": true,
          "description": "Default machine resource specifications per role. Individual hosts can override via hosts.<name>.machine."
        },
        "tpm": {
          "title": "TPM Disk Encryption",
          "type": "boolean",
          "default": false,
          "description": "Enable LUKS disk encryption with TPM 2.0 on the provisioned cluster. On virtual platforms (kubevirt), a persistent vTPM device is automatically added to VMs."
        }
      },
      "required": ["name", "version"],
      "additionalProperties": true,
      "description": "Cluster-level configuration for installation.",
      "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html"
    },
    "network": {
      "title": "Network",
      "type": "object",
      "required": ["domain"],
      "properties": {
        "domain": {
          "title": "Base Domain",
          "$ref": "#/$defs/fqdn",
          "description": "Base DNS domain (e.g., example.com). Cannot be changed after installation.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-dns-user-infra_installing-bare-metal"
        },
        "trustBundle": {
          "title": "Trust Bundle",
          "type": "string",
          "minLength": 1,
          "description": "Path to PEM-encoded CA certificate bundle for cluster-wide TLS trust.",
          "x-is-file": true,
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/configuring-a-custom-pki.html"
        },
        "proxy": {
          "title": "Proxy",
          "type": "object",
          "properties": {
            "httpProxy": {
              "title": "HTTP Proxy",
              "$ref": "#/$defs/proxyUrl",
              "description": "HTTP proxy URL (http://host:port).",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-configure-proxy_installing-bare-metal"
            },
            "httpsProxy": {
              "title": "HTTPS Proxy",
              "$ref": "#/$defs/proxyUrl",
              "description": "HTTPS proxy URL (http://host:port or https://host:port).",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-configure-proxy_installing-bare-metal"
            },
            "noProxy": {
              "title": "No Proxy",
              "type": "string",
              "pattern": "^[a-zA-Z0-9.*,/-]+$",
              "description": "Comma-separated hosts/CIDRs that bypass the proxy.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-configure-proxy_installing-bare-metal"
            }
          },
          "additionalProperties": true,
          "description": "Proxy settings for cluster egress traffic.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-configure-proxy_installing-bare-metal"
        },
        "ntpservers": {
          "title": "NTP Servers",
          "type": "array",
          "items": {
            "anyOf": [
              { "$ref": "#/$defs/ipAddress" },
              { "$ref": "#/$defs/fqdn" }
            ]
          },
          "description": "NTP servers for time synchronization (IP or FQDN).",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/install_config/installing-customizing.html#installation-special-config-chrony_installing-customizing"
        },
        "nameservers": {
          "title": "DNS Servers",
          "type": "array",
          "items": { "$ref": "#/$defs/ipAddress" },
          "minItems": 1,
          "maxItems": 3,
          "description": "DNS server IPs (1-3 recommended).",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-dns-user-infra_installing-bare-metal"
        },
        "dnsResolver": {
          "title": "DNS Resolver",
          "type": "object",
          "properties": {
            "search": {
              "title": "Search Domains",
              "type": "array",
              "items": { "$ref": "#/$defs/fqdn" },
              "maxItems": 6,
              "description": "DNS search domains (max 6).",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-dns-user-infra_installing-bare-metal"
            }
          },
          "additionalProperties": true,
          "description": "DNS resolver configuration.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-dns-user-infra_installing-bare-metal"
        },
        "primary": {
          "title": "Primary Network",
          "type": "object",
          "properties": {
            "bond": {
              "title": "Bond Mode",
              "oneOf": [
                { "$ref": "#/$defs/bondMode" },
                { "type": "boolean", "const": false }
              ],
              "description": "Linux bonding mode. Use false to disable bonding.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
            },
            "vlan": {
              "title": "VLAN ID",
              "oneOf": [
                { "$ref": "#/$defs/vlanId" },
                { "type": "boolean", "const": false }
              ],
              "description": "VLAN tag (1-4094). Use false for untagged.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
            },
            "mtu": {
              "title": "MTU",
              "anyOf": [
                { "$ref": "#/$defs/mtuPreset" },
                { "$ref": "#/$defs/mtuCustom" },
                { "type": "boolean", "const": false }
              ],
              "description": "Interface MTU. Select preset, enter custom (576-9216), or disable to omit.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/changing-cluster-network-mtu.html"
            },
            "gateway": {
              "title": "Gateway",
              "$ref": "#/$defs/ipAddress",
              "description": "Default gateway IP address.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
            },
            "subnet": {
              "title": "Subnet",
              "$ref": "#/$defs/cidr",
              "description": "Network CIDR (e.g., 192.168.0.0/24).",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
            },
            "vips": {
              "title": "Virtual IPs",
              "type": "object",
              "properties": {
                "api": {
                  "title": "API VIP",
                  "oneOf": [
                    { "$ref": "#/$defs/ipAddress" },
                    {
                      "type": "array",
                      "items": { "$ref": "#/$defs/ipAddress" },
                      "minItems": 1,
                      "maxItems": 2
                    }
                  ],
                  "description": "Kubernetes API virtual IP (single or dual-stack array).",
                  "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-bare-metal-config-yaml_installing-bare-metal"
                },
                "apps": {
                  "title": "Ingress VIP",
                  "oneOf": [
                    { "$ref": "#/$defs/ipAddress" },
                    {
                      "type": "array",
                      "items": { "$ref": "#/$defs/ipAddress" },
                      "minItems": 1,
                      "maxItems": 2
                    }
                  ],
                  "description": "Application ingress virtual IP (single or dual-stack array).",
                  "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-bare-metal-config-yaml_installing-bare-metal"
                }
              },
              "required": ["api", "apps"],
              "additionalProperties": true,
              "description": "Virtual IPs for API and ingress endpoints.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-bare-metal-config-yaml_installing-bare-metal"
            }
          },
          "additionalProperties": true,
          "description": "Primary network settings for cluster communication.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
        },
        "cluster": {
          "title": "Cluster Network",
          "type": "object",
          "properties": {
            "subnet": {
              "title": "Pod Network CIDR",
              "$ref": "#/$defs/cidr",
              "description": "IP range for pod networking (e.g., 10.128.0.0/14).",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-bare-metal-config-yaml_installing-bare-metal"
            },
            "hostPrefix": {
              "title": "Host Prefix",
              "type": "integer",
              "minimum": 8,
              "maximum": 128,
              "default": 23,
              "description": "Subnet prefix per node (23=/512 pods, 24=/256 pods).",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-bare-metal-config-yaml_installing-bare-metal"
            }
          },
          "additionalProperties": true,
          "description": "Pod network CIDR and per-node allocation.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/cluster-network-operator.html"
        },
        "service": {
          "title": "Service Network",
          "type": "object",
          "properties": {
            "subnet": {
              "title": "Service CIDR",
              "$ref": "#/$defs/cidr",
              "description": "IP range for Kubernetes Services (e.g., 172.30.0.0/16).",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-bare-metal-config-yaml_installing-bare-metal"
            }
          },
          "additionalProperties": true,
          "description": "Service network CIDR for ClusterIP allocation.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/cluster-network-operator.html"
        },
        "secondary": {
          "title": "Secondary Networks",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "title": "Network Name",
                "type": "string",
                "minLength": 1,
                "maxLength": 63,
                "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?$",
                "description": "Logical name (e.g., storage, oob).",
                "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/multiple_networks/understanding-multiple-networks.html"
              },
              "type": {
                "title": "Network Type",
                "type": "string",
                "enum": ["linux-bridge", "bond", "vlan", "ethernet", "ovs-bridge"],
                "description": "NMState interface type.",
                "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
              },
              "state": {
                "title": "State",
                "type": "string",
                "enum": ["up", "down", "absent"],
                "default": "up",
                "description": "Desired operational state."
              },
              "namespace": {
                "title": "Namespace",
                "$ref": "#/$defs/dnsLabel",
                "description": "Network namespace."
              },
              "vlan": {
                "title": "VLAN ID",
                "oneOf": [
                  { "$ref": "#/$defs/vlanId" },
                  { "type": "boolean", "const": false }
                ],
                "description": "VLAN tag (1-4094). Use false for untagged.",
                "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
              },
              "ports": {
                "title": "Ports",
                "type": "array",
                "items": { "$ref": "#/$defs/interfaceName" },
                "minItems": 1,
                "description": "Physical interfaces (e.g., eth1, eth2)."
              },
              "subnet": {
                "title": "Subnet",
                "anyOf": [
                  { "$ref": "#/$defs/cidr" },
                  { "type": "string", "const": "dhcp" }
                ],
                "description": "Network CIDR or 'dhcp' for dynamic.",
                "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
              },
              "gateway": {
                "title": "Gateway",
                "$ref": "#/$defs/ipAddress",
                "description": "Gateway IP for this network."
              },
              "bond": {
                "title": "Bond Mode",
                "oneOf": [
                  { "$ref": "#/$defs/bondMode" },
                  { "type": "boolean", "const": false }
                ],
                "description": "Linux bonding mode. Use false to disable.",
                "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
              },
              "mtu": {
                "title": "MTU",
                "anyOf": [
                  { "$ref": "#/$defs/mtuPreset" },
                  { "$ref": "#/$defs/mtuCustom" },
                  { "type": "boolean", "const": false }
                ],
                "description": "Interface MTU. Select preset, enter custom (576-9216), or disable to omit.",
                "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/changing-cluster-network-mtu.html"
              }
            },
            "required": ["name"],
            "additionalProperties": true
          },
          "description": "Additional networks (storage, OOB, provisioning).",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/multiple_networks/understanding-multiple-networks.html"
        }
      },
      "additionalProperties": true,
      "description": "Network configuration for cluster and node networking.",
      "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-network-user-infra_installing-bare-metal"
    },
    "hosts": {
      "title": "Hosts",
      "type": "object",
      "properties": {},
      "patternProperties": {
        "^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$": {
          "type": "object",
          "properties": {
            "role": {
              "title": "Role",
              "type": "string",
              "description": "Node role: control (control-plane), worker, or bootstrap.",
              "enum": ["control", "worker", "bootstrap"],
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal/installing-bare-metal.html#installation-requirements-user-infra_installing-bare-metal"
            },
            "storage": {
              "title": "Storage",
              "type": "object",
              "description": "Disk hints for OS installation.",
              "properties": {
                "os": {
                  "title": "OS Disk",
                  "anyOf": [
                    {
                      "type": "object",
                      "description": "Root device hints for OS disk selection.",
                      "properties": {
                        "deviceName": {
                          "title": "Device Path",
                          "$ref": "#/$defs/devicePath",
                          "description": "Device path (e.g., /dev/sda)."
                        },
                        "byId": {
                          "title": "By-ID",
                          "type": "string",
                          "minLength": 1,
                          "description": "Stable /dev/disk/by-id identifier."
                        },
                        "wwn": {
                          "title": "WWN",
                          "type": "string",
                          "minLength": 1,
                          "description": "World Wide Name identifier.",
                          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal_ipi/ipi-install-installation-workflow.html#root-device-hints_ipi-install-installation-workflow"
                        },
                        "serialNumber": {
                          "title": "Serial Number",
                          "type": "string",
                          "minLength": 1,
                          "description": "Disk serial number."
                        },
                        "hctl": {
                          "title": "HCTL",
                          "type": "string",
                          "pattern": "^[0-9]+:[0-9]+:[0-9]+:[0-9]+$",
                          "description": "SCSI address (H:C:T:L format)."
                        },
                        "model": {
                          "title": "Model",
                          "type": "string",
                          "minLength": 1,
                          "description": "Disk model string."
                        },
                        "vendor": {
                          "title": "Vendor",
                          "type": "string",
                          "minLength": 1,
                          "description": "Disk vendor string."
                        },
                        "rotational": {
                          "title": "Rotational",
                          "type": "boolean",
                          "description": "True for HDD, false for SSD."
                        },
                        "minSizeGigabytes": {
                          "title": "Minimum Size (GB)",
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 65536,
                          "description": "Minimum disk size in GiB."
                        },
                        "paths": {
                          "title": "Candidate Paths",
                          "type": "array",
                          "items": { "$ref": "#/$defs/devicePath" },
                          "minItems": 1,
                          "description": "List of candidate device paths."
                        }
                      },
                      "additionalProperties": false
                    },
                    {
                      "type": "string",
                      "minLength": 1,
                      "description": "Simple device path or by-id string."
                    }
                  ],
                  "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal_ipi/ipi-install-installation-workflow.html#root-device-hints_ipi-install-installation-workflow"
                }
              },
              "additionalProperties": true,
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal_ipi/ipi-install-installation-workflow.html#root-device-hints_ipi-install-installation-workflow"
            },
            "bmc": {
              "title": "BMC",
              "type": "object",
              "properties": {
                "vendor": {
                  "title": "Vendor",
                  "type": "string",
                  "enum": ["dell", "hp", "hpe", "supermicro", "lenovo", "cisco", "fujitsu", "ksushy", "kubevirt-redfish", "other"],
                  "description": "BMC vendor."
                },
                "version": {
                  "title": "Version",
                  "anyOf": [
                    { "type": "integer", "minimum": 0 },
                    { "type": "string", "pattern": "^[0-9.]+$" }
                  ],
                  "description": "BMC/iDRAC/iLO firmware version."
                },
                "username": {
                  "title": "Username",
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 64,
                  "description": "BMC login username."
                },
                "password": {
                  "title": "Password",
                  "type": "string",
                  "minLength": 1,
                  "description": "Path to file containing BMC password.",
                  "x-is-file": true
                },
                "address": {
                  "title": "Address",
                  "anyOf": [
                    {
                      "type": "string",
                      "pattern": "^(idrac-virtualmedia|redfish-virtualmedia|redfish|ipmi|ilo5-virtualmedia)://.+$",
                      "description": "BMC URI with protocol."
                    },
                    { "$ref": "#/$defs/ipAddress" },
                    { "$ref": "#/$defs/fqdn" }
                  ],
                  "description": "BMC endpoint (IP, FQDN, or protocol://host).",
                  "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal_ipi/ipi-install-installation-workflow.html#bmc-addressing_ipi-install-installation-workflow"
                },
                "macAddress": {
                  "title": "MAC Address",
                  "$ref": "#/$defs/macAddress",
                  "description": "BMC management interface MAC."
                },
                "disableCertificateVerification": {
                  "title": "Disable TLS Verification",
                  "type": "boolean",
                  "default": false,
                  "description": "Skip BMC TLS certificate validation."
                }
              },
              "additionalProperties": true,
              "description": "Baseboard Management Controller settings.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal_ipi/ipi-install-installation-workflow.html#bmc-addressing_ipi-install-installation-workflow"
            },
            "network": {
              "title": "Network",
              "type": "object",
              "properties": {
                "interfaces": {
                  "title": "Interfaces",
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "title": "Name",
                        "$ref": "#/$defs/interfaceName",
                        "description": "Interface name (e.g., eth0, ens3)."
                      },
                      "macAddress": {
                        "title": "MAC Address",
                        "$ref": "#/$defs/macAddress",
                        "description": "Interface MAC address."
                      }
                    },
                    "required": ["name", "macAddress"],
                    "additionalProperties": true
                  },
                  "minItems": 1,
                  "description": "Physical network interfaces on the host.",
                  "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
                },
                "primary": {
                  "title": "Primary",
                  "type": "object",
                  "properties": {
                    "address": {
                      "title": "IP Address",
                      "$ref": "#/$defs/ipAddress",
                      "description": "Host IP on the primary network."
                    },
                    "ports": {
                      "title": "Ports",
                      "type": "array",
                      "items": { "$ref": "#/$defs/interfaceName" },
                      "minItems": 1,
                      "description": "Interface names for primary network."
                    }
                  },
                  "required": ["address"],
                  "additionalProperties": true,
                  "description": "Primary network assignment for this host."
                }
              },
              "additionalProperties": true,
              "description": "Host-specific network configuration.",
              "x-doc-url": "https://docs.openshift.com/container_platform/4.20/networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.html"
            },
            "machine": {
              "title": "Machine Resources",
              "$ref": "#/$defs/machineSpec",
              "description": "Per-host resource override. Takes precedence over cluster.machine role defaults."
            }
          },
          "required": ["role"],
          "additionalProperties": true,
          "description": "Host configuration keyed by hostname."
        }
      },
      "additionalProperties": false,
      "minProperties": 1,
      "propertyNames": {
        "$ref": "#/$defs/fqdn",
        "description": "Hostname or FQDN."
      },
      "description": "Host inventory keyed by hostname (minimum 1 host required).",
      "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_bare_metal_ipi/ipi-install-installation-workflow.html"
    },
    "plugins": {
      "title": "Plugins",
      "type": "object",
      "properties": {
        "nutanix": {
          "title": "Nutanix",
          "type": "object",
          "properties": {
            "prismCentral": {
              "title": "Prism Central",
              "type": "object",
              "properties": {
                "endpoint": {
                  "title": "Endpoint",
                  "anyOf": [
                    { "$ref": "#/$defs/ipAddress" },
                    { "$ref": "#/$defs/fqdn" }
                  ],
                  "description": "Prism Central hostname or IP."
                },
                "port": {
                  "title": "Port",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "default": 9440,
                  "description": "Prism Central API port."
                },
                "username": {
                  "title": "Username",
                  "type": "string",
                  "minLength": 1,
                  "description": "Prism Central username."
                },
                "password": {
                  "title": "Password",
                  "type": "string",
                  "minLength": 1,
                  "description": "Path to Prism Central password file.",
                  "x-is-file": true
                }
              },
              "description": "Prism Central connection settings."
            },
            "subnetUUID": {
              "title": "Subnet UUID",
              "type": "string",
              "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$",
              "description": "Nutanix subnet UUID for VMs."
            }
          },
          "additionalProperties": true,
          "description": "Nutanix platform integration settings.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_nutanix/installing-nutanix-installer-provisioned.html"
        },
        "vsphere": {
          "title": "vSphere",
          "type": "object",
          "properties": {
            "vcenter": {
              "title": "vCenter Server",
              "type": "object",
              "properties": {
                "server": {
                  "title": "Server",
                  "anyOf": [
                    { "$ref": "#/$defs/ipAddress" },
                    { "$ref": "#/$defs/fqdn" }
                  ],
                  "description": "vCenter Server hostname or IP address."
                },
                "username": {
                  "title": "Username",
                  "type": "string",
                  "minLength": 1,
                  "description": "vCenter username (e.g., administrator@vsphere.local)."
                },
                "password": {
                  "title": "Password",
                  "type": "string",
                  "minLength": 1,
                  "description": "Path to file containing vCenter password.",
                  "x-is-file": true
                },
                "datacenter": {
                  "title": "Datacenter",
                  "type": "string",
                  "minLength": 1,
                  "description": "vSphere datacenter name."
                },
                "defaultDatastore": {
                  "title": "Default Datastore",
                  "type": "string",
                  "minLength": 1,
                  "description": "Default datastore for VM storage."
                },
                "cluster": {
                  "title": "Cluster",
                  "type": "string",
                  "minLength": 1,
                  "description": "vSphere compute cluster name."
                },
                "folder": {
                  "title": "VM Folder",
                  "type": "string",
                  "description": "VM folder path (e.g., /datacenter/vm/folder)."
                },
                "resourcePool": {
                  "title": "Resource Pool",
                  "type": "string",
                  "description": "Resource pool path (optional, defaults to cluster root)."
                }
              },
              "required": ["server", "username", "password", "datacenter", "defaultDatastore", "cluster"],
              "description": "vCenter Server connection and resource settings."
            },
            "network": {
              "title": "Network",
              "type": "string",
              "minLength": 1,
              "description": "vSphere network/port group name for VMs."
            },
            "diskGiB": {
              "title": "Disk Size (GiB)",
              "type": "integer",
              "minimum": 120,
              "default": 120,
              "description": "VM disk size in GiB (minimum 120)."
            },
            "memoryMiB": {
              "title": "Memory (MiB)",
              "type": "integer",
              "minimum": 16384,
              "default": 16384,
              "description": "VM memory in MiB (minimum 16384 for control plane)."
            },
            "cpus": {
              "title": "CPUs",
              "type": "integer",
              "minimum": 4,
              "default": 4,
              "description": "Number of vCPUs per VM (minimum 4)."
            },
            "coresPerSocket": {
              "title": "Cores Per Socket",
              "type": "integer",
              "minimum": 1,
              "default": 4,
              "description": "CPU cores per socket."
            },
            "failureDomains": {
              "title": "Failure Domains",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "title": "Name",
                    "type": "string",
                    "minLength": 1,
                    "description": "Failure domain name."
                  },
                  "region": {
                    "title": "Region",
                    "type": "string",
                    "minLength": 1,
                    "description": "Region tag category value."
                  },
                  "zone": {
                    "title": "Zone",
                    "type": "string",
                    "minLength": 1,
                    "description": "Zone tag category value."
                  },
                  "server": {
                    "title": "vCenter Server",
                    "anyOf": [
                      { "$ref": "#/$defs/ipAddress" },
                      { "$ref": "#/$defs/fqdn" }
                    ],
                    "description": "vCenter for this failure domain (if different from primary)."
                  },
                  "datacenter": {
                    "title": "Datacenter",
                    "type": "string",
                    "description": "Datacenter for this failure domain."
                  },
                  "cluster": {
                    "title": "Compute Cluster",
                    "type": "string",
                    "description": "Compute cluster for this failure domain."
                  },
                  "datastore": {
                    "title": "Datastore",
                    "type": "string",
                    "description": "Datastore for this failure domain."
                  },
                  "network": {
                    "title": "Network",
                    "type": "string",
                    "description": "Network for this failure domain."
                  },
                  "resourcePool": {
                    "title": "Resource Pool",
                    "type": "string",
                    "description": "Resource pool path."
                  },
                  "folder": {
                    "title": "VM Folder",
                    "type": "string",
                    "description": "VM folder path."
                  }
                },
                "required": ["name", "region", "zone"],
                "additionalProperties": true
              },
              "description": "Failure domains for multi-zone deployments."
            }
          },
          "required": ["vcenter", "network"],
          "additionalProperties": true,
          "description": "vSphere IPI platform settings.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_vsphere/ipi/installing-vsphere-installer-provisioned.html"
        },
        "aws": {
          "title": "AWS",
          "type": "object",
          "properties": {
            "region": {
              "title": "Region",
              "type": "string",
              "pattern": "^[a-z]{2}-[a-z]+-[0-9]+$",
              "description": "AWS region (e.g., us-east-1, eu-west-2)."
            },
            "credentials": {
              "title": "Credentials File",
              "type": "string",
              "description": "Path to AWS credentials file (~/.aws/credentials format).",
              "x-is-file": true
            },
            "subnets": {
              "title": "Subnets",
              "type": "array",
              "items": { "type": "string", "pattern": "^subnet-[a-f0-9]+$" },
              "description": "Existing subnet IDs for cluster deployment."
            },
            "hostedZone": {
              "title": "Hosted Zone",
              "type": "string",
              "description": "Route53 hosted zone ID for DNS records."
            },
            "serviceEndpoints": {
              "title": "Service Endpoints",
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string", "description": "AWS service name." },
                  "url": { "type": "string", "format": "uri", "description": "Custom endpoint URL." }
                },
                "required": ["name", "url"]
              },
              "description": "Custom AWS service endpoints for private deployments."
            },
            "controlPlane": {
              "title": "Control Plane",
              "type": "object",
              "properties": {
                "type": {
                  "title": "Instance Type",
                  "type": "string",
                  "default": "m6i.xlarge",
                  "description": "EC2 instance type for control plane nodes."
                },
                "zones": {
                  "title": "Availability Zones",
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Availability zones for control plane (e.g., us-east-1a)."
                },
                "rootVolume": {
                  "title": "Root Volume",
                  "type": "object",
                  "properties": {
                    "size": { "type": "integer", "minimum": 120, "default": 120, "description": "Volume size in GiB." },
                    "type": { "type": "string", "enum": ["gp3", "gp2", "io1", "io2"], "default": "gp3", "description": "EBS volume type." },
                    "iops": { "type": "integer", "minimum": 3000, "description": "IOPS (for io1/io2/gp3)." }
                  }
                }
              },
              "description": "Control plane instance configuration."
            },
            "compute": {
              "title": "Compute",
              "type": "object",
              "properties": {
                "type": {
                  "title": "Instance Type",
                  "type": "string",
                  "default": "m6i.xlarge",
                  "description": "EC2 instance type for worker nodes."
                },
                "zones": {
                  "title": "Availability Zones",
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Availability zones for workers."
                },
                "rootVolume": {
                  "title": "Root Volume",
                  "type": "object",
                  "properties": {
                    "size": { "type": "integer", "minimum": 120, "default": 120 },
                    "type": { "type": "string", "enum": ["gp3", "gp2", "io1", "io2"], "default": "gp3" }
                  }
                }
              },
              "description": "Worker instance configuration."
            }
          },
          "required": ["region"],
          "additionalProperties": true,
          "description": "AWS IPI platform settings.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_aws/ipi/installing-aws-customizations.html"
        },
        "azure": {
          "title": "Azure",
          "type": "object",
          "properties": {
            "region": {
              "title": "Region",
              "type": "string",
              "description": "Azure region (e.g., eastus, westeurope)."
            },
            "credentials": {
              "title": "Credentials File",
              "type": "string",
              "description": "Path to Azure service principal credentials JSON file.",
              "x-is-file": true
            },
            "baseDomainResourceGroupName": {
              "title": "Base Domain Resource Group",
              "type": "string",
              "description": "Resource group containing the base domain DNS zone."
            },
            "networkResourceGroupName": {
              "title": "Network Resource Group",
              "type": "string",
              "description": "Resource group containing the VNet (if using existing)."
            },
            "virtualNetwork": {
              "title": "Virtual Network",
              "type": "string",
              "description": "Name of existing VNet to deploy into."
            },
            "controlPlaneSubnet": {
              "title": "Control Plane Subnet",
              "type": "string",
              "description": "Name of existing subnet for control plane nodes."
            },
            "computeSubnet": {
              "title": "Compute Subnet",
              "type": "string",
              "description": "Name of existing subnet for worker nodes."
            },
            "outboundType": {
              "title": "Outbound Type",
              "type": "string",
              "enum": ["Loadbalancer", "UserDefinedRouting"],
              "default": "Loadbalancer",
              "description": "Outbound routing type for cluster egress."
            },
            "cloudName": {
              "title": "Cloud Name",
              "type": "string",
              "enum": ["AzurePublicCloud", "AzureUSGovernmentCloud", "AzureChinaCloud", "AzureGermanCloud"],
              "default": "AzurePublicCloud",
              "description": "Azure cloud environment."
            },
            "controlPlane": {
              "title": "Control Plane",
              "type": "object",
              "properties": {
                "type": { "type": "string", "default": "Standard_D8s_v3", "description": "VM size for control plane." },
                "zones": { "type": "array", "items": { "type": "string" }, "description": "Availability zones." },
                "osDisk": {
                  "type": "object",
                  "properties": {
                    "diskSizeGB": { "type": "integer", "minimum": 120, "default": 1024 },
                    "diskType": { "type": "string", "enum": ["Premium_LRS", "StandardSSD_LRS", "Standard_LRS"], "default": "Premium_LRS" }
                  }
                }
              }
            },
            "compute": {
              "title": "Compute",
              "type": "object",
              "properties": {
                "type": { "type": "string", "default": "Standard_D4s_v3", "description": "VM size for workers." },
                "zones": { "type": "array", "items": { "type": "string" } },
                "osDisk": {
                  "type": "object",
                  "properties": {
                    "diskSizeGB": { "type": "integer", "minimum": 120, "default": 128 },
                    "diskType": { "type": "string", "enum": ["Premium_LRS", "StandardSSD_LRS", "Standard_LRS"], "default": "Premium_LRS" }
                  }
                }
              }
            }
          },
          "required": ["region", "baseDomainResourceGroupName"],
          "additionalProperties": true,
          "description": "Azure IPI platform settings.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_azure/ipi/installing-azure-customizations.html"
        },
        "gcp": {
          "title": "GCP",
          "type": "object",
          "properties": {
            "projectID": {
              "title": "Project ID",
              "type": "string",
              "pattern": "^[a-z][a-z0-9-]{4,28}[a-z0-9]$",
              "description": "GCP project ID for resource deployment."
            },
            "region": {
              "title": "Region",
              "type": "string",
              "description": "GCP region (e.g., us-central1, europe-west1)."
            },
            "credentials": {
              "title": "Credentials File",
              "type": "string",
              "description": "Path to GCP service account key JSON file.",
              "x-is-file": true
            },
            "network": {
              "title": "Network",
              "type": "string",
              "description": "Name of existing VPC network."
            },
            "controlPlaneSubnet": {
              "title": "Control Plane Subnet",
              "type": "string",
              "description": "Name of existing subnet for control plane."
            },
            "computeSubnet": {
              "title": "Compute Subnet",
              "type": "string",
              "description": "Name of existing subnet for workers."
            },
            "controlPlane": {
              "title": "Control Plane",
              "type": "object",
              "properties": {
                "type": { "type": "string", "default": "n2-standard-4", "description": "Machine type for control plane." },
                "zones": { "type": "array", "items": { "type": "string" }, "description": "Zones (e.g., us-central1-a)." },
                "osDisk": {
                  "type": "object",
                  "properties": {
                    "diskSizeGB": { "type": "integer", "minimum": 120, "default": 128 },
                    "diskType": { "type": "string", "enum": ["pd-ssd", "pd-standard", "pd-balanced"], "default": "pd-ssd" }
                  }
                }
              }
            },
            "compute": {
              "title": "Compute",
              "type": "object",
              "properties": {
                "type": { "type": "string", "default": "n2-standard-4" },
                "zones": { "type": "array", "items": { "type": "string" } },
                "osDisk": {
                  "type": "object",
                  "properties": {
                    "diskSizeGB": { "type": "integer", "minimum": 120, "default": 128 },
                    "diskType": { "type": "string", "enum": ["pd-ssd", "pd-standard", "pd-balanced"], "default": "pd-ssd" }
                  }
                }
              }
            }
          },
          "required": ["projectID", "region"],
          "additionalProperties": true,
          "description": "GCP IPI platform settings.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_gcp/ipi/installing-gcp-customizations.html"
        },
        "openstack": {
          "title": "OpenStack",
          "type": "object",
          "properties": {
            "cloud": {
              "title": "Cloud Name",
              "type": "string",
              "description": "Cloud name from clouds.yaml configuration."
            },
            "credentials": {
              "title": "Clouds YAML",
              "type": "string",
              "description": "Path to clouds.yaml file with OpenStack credentials.",
              "x-is-file": true
            },
            "externalNetwork": {
              "title": "External Network",
              "type": "string",
              "description": "Name of external network for floating IPs."
            },
            "computeFlavor": {
              "title": "Compute Flavor",
              "type": "string",
              "default": "m1.xlarge",
              "description": "OpenStack flavor for all nodes."
            },
            "controlPlaneFlavor": {
              "title": "Control Plane Flavor",
              "type": "string",
              "description": "Flavor for control plane (overrides computeFlavor)."
            },
            "apiFloatingIP": {
              "title": "API Floating IP",
              "anyOf": [
                { "$ref": "#/$defs/ipv4" },
                { "type": "string", "const": "" }
              ],
              "description": "Pre-allocated floating IP for API endpoint."
            },
            "ingressFloatingIP": {
              "title": "Ingress Floating IP",
              "anyOf": [
                { "$ref": "#/$defs/ipv4" },
                { "type": "string", "const": "" }
              ],
              "description": "Pre-allocated floating IP for ingress."
            },
            "trunkSupport": {
              "title": "Trunk Support",
              "type": "boolean",
              "default": false,
              "description": "Enable Neutron trunk ports for SR-IOV."
            },
            "octaviaSupport": {
              "title": "Octavia Support",
              "type": "boolean",
              "default": true,
              "description": "Use Octavia load balancer (recommended)."
            },
            "machinesSubnet": {
              "title": "Machines Subnet",
              "type": "string",
              "description": "UUID of existing subnet for nodes."
            }
          },
          "required": ["cloud", "externalNetwork"],
          "additionalProperties": true,
          "description": "OpenStack IPI platform settings.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_openstack/installing-openstack-installer-custom.html"
        },
        "ibmcloud": {
          "title": "IBM Cloud",
          "type": "object",
          "properties": {
            "region": {
              "title": "Region",
              "type": "string",
              "description": "IBM Cloud region (e.g., us-south, eu-de)."
            },
            "credentials": {
              "title": "API Key File",
              "type": "string",
              "description": "Path to file containing IBM Cloud API key.",
              "x-is-file": true
            },
            "resourceGroupName": {
              "title": "Resource Group",
              "type": "string",
              "description": "IBM Cloud resource group name."
            },
            "vpcName": {
              "title": "VPC Name",
              "type": "string",
              "description": "Name of existing VPC."
            },
            "controlPlaneSubnets": {
              "title": "Control Plane Subnets",
              "type": "array",
              "items": { "type": "string" },
              "description": "Existing subnet names for control plane."
            },
            "computeSubnets": {
              "title": "Compute Subnets",
              "type": "array",
              "items": { "type": "string" },
              "description": "Existing subnet names for workers."
            },
            "controlPlane": {
              "title": "Control Plane",
              "type": "object",
              "properties": {
                "type": { "type": "string", "default": "bx2-4x16", "description": "Instance profile for control plane." },
                "zones": { "type": "array", "items": { "type": "string" }, "description": "Zones (e.g., us-south-1)." },
                "bootVolume": {
                  "type": "object",
                  "properties": {
                    "size": { "type": "integer", "minimum": 120, "default": 120 }
                  }
                }
              }
            },
            "compute": {
              "title": "Compute",
              "type": "object",
              "properties": {
                "type": { "type": "string", "default": "bx2-4x16" },
                "zones": { "type": "array", "items": { "type": "string" } },
                "bootVolume": {
                  "type": "object",
                  "properties": {
                    "size": { "type": "integer", "minimum": 120, "default": 120 }
                  }
                }
              }
            }
          },
          "required": ["region", "resourceGroupName"],
          "additionalProperties": true,
          "description": "IBM Cloud IPI platform settings.",
          "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/installing_ibm_cloud/ipi/installing-ibm-cloud-customizations.html"
        },
        "kubevirt": {
          "title": "KubeVirt",
          "type": "object",
          "properties": {
            "storageClass": {
              "title": "Storage Classes",
              "type": "object",
              "properties": {
                "default": {
                  "title": "Default Storage Class",
                  "type": "string",
                  "minLength": 1,
                  "description": "Default StorageClass (ODF, Ceph) for worker OS disks and general use."
                },
                "performance": {
                  "title": "Performance Storage Class",
                  "type": "string",
                  "minLength": 1,
                  "description": "Fast StorageClass (NVMe, LVMS) for control plane OS disks (etcd) and data disks. Defaults to storageClass.default if not set."
                }
              },
              "additionalProperties": true,
              "description": "Storage class tiers. 'default' for bulk/capacity, 'performance' for fast I/O (etcd, data disks).",
              "x-render": "tier-map",
              "x-tier-options": ["default", "performance"]
            },
            "network": {
              "title": "VM Network",
              "type": "object",
              "properties": {
                "type": {
                  "title": "Network Type",
                  "type": "string",
                  "enum": ["cudn", "linux-bridge", "nad"],
                  "default": "cudn",
                  "description": "VM network backend. 'cudn' uses a ClusterUserDefinedNetwork with OVN Localnet (CUDN created separately, namespace labeled for selector match). 'linux-bridge' creates a NetworkAttachmentDefinition with a Linux bridge CNI config. 'nad' references a pre-existing NetworkAttachmentDefinition by name."
                },
                "name": {
                  "title": "Network Name",
                  "type": "string",
                  "minLength": 1,
                  "description": "Name of the network resource VMs attach to. For 'cudn' defaults to cudn-vmdata-<vlan>. For 'nad' this is the pre-existing NAD name. Not used for 'linux-bridge'."
                },
                "vlan": {
                  "title": "VLAN ID",
                  "$ref": "#/$defs/vlanId",
                  "description": "VLAN ID for CUDN mode. Labels the namespace with vlan-<id> for CUDN selector match and derives the default network name."
                },
                "linuxBridge": {
                  "title": "Linux Bridge Options",
                  "type": "object",
                  "properties": {
                    "bridge": {
                      "title": "Bridge Name",
                      "type": "string",
                      "minLength": 1,
                      "default": "bridge-1410",
                      "description": "Linux bridge device name for the NetworkAttachmentDefinition CNI config."
                    }
                  },
                  "additionalProperties": false,
                  "description": "Options for linux-bridge NetworkAttachmentDefinition."
                },
                "nad": {
                  "title": "NAD Options",
                  "type": "object",
                  "properties": {},
                  "additionalProperties": false,
                  "description": "Placeholder for NAD-specific options. Use network.name for the NAD name."
                }
              },
              "required": ["type"],
              "additionalProperties": false,
              "description": "VM network configuration. Choose a type and fill in the corresponding options."
            },
            "nodeSelector": {
              "title": "Node Selector Key",
              "type": "string",
              "minLength": 1,
              "description": "Node label key for round-robin VM placement (e.g., vgNode)."
            },
            "storageMapping": {
              "title": "Storage Class Mapping",
              "type": "object",
              "properties": {
                "control": {
                  "title": "Control Plane",
                  "type": "object",
                  "properties": {
                    "os": {
                      "title": "OS Disk Tier",
                      "type": "string",
                      "x-options-from-keys": "plugins.kubevirt.storageClass",
                      "description": "Storage class tier for control plane OS disks. Must match a key in storageClass."
                    },
                    "data": {
                      "title": "Data Disk Tier",
                      "type": "string",
                      "x-options-from-keys": "plugins.kubevirt.storageClass",
                      "description": "Storage class tier for control plane data disks. Defaults to os tier if not set."
                    }
                  },
                  "additionalProperties": true,
                  "description": "Storage class tier mapping for control plane nodes."
                },
                "worker": {
                  "title": "Worker",
                  "type": "object",
                  "properties": {
                    "os": {
                      "title": "OS Disk Tier",
                      "type": "string",
                      "x-options-from-keys": "plugins.kubevirt.storageClass",
                      "description": "Storage class tier for worker OS disks. Must match a key in storageClass."
                    },
                    "data": {
                      "title": "Data Disk Tier",
                      "type": "string",
                      "x-options-from-keys": "plugins.kubevirt.storageClass",
                      "description": "Storage class tier for worker data disks. Defaults to os tier if not set."
                    }
                  },
                  "additionalProperties": true,
                  "description": "Storage class tier mapping for worker nodes."
                }
              },
              "additionalProperties": true,
              "description": "Maps node roles to storage class tiers for OS and data disks. Tier labels reference keys in storageClass."
            }
          },
          "additionalProperties": true,
          "description": "KubeVirt / OpenShift Virtualization settings for VM-based cluster provisioning.",
          "x-doc-url": "https://docs.openshift.com/container-platform/4.20/virt/about_virt/about-virt.html"
        }
      },
      "additionalProperties": true,
      "description": "Platform-specific plugin configurations.",
      "x-doc-url": "https://docs.openshift.com/container_platform/4.20/installing/index.html"
    }
  },
  "additionalProperties": false,
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "required": ["account", "cluster", "network", "hosts"]
}
