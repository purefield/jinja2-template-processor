{
  "title": "ArgoCD / OpenShift GitOps",
  "description": "Installs openshift-gitops-operator and configures an ArgoCD instance. Specify {} for all defaults.",
  "type": "object",
  "x-doc-url": "https://docs.openshift.com/gitops/latest/understanding_openshift_gitops/about-redhat-openshift-gitops.html",
  "properties": {
    "enabled": {
      "title": "Enabled",
      "type": "boolean",
      "default": true,
      "description": "Set false to skip ArgoCD installation."
    },
    "channel": {
      "title": "Channel",
      "type": "string",
      "default": "latest",
      "description": "OLM subscription channel (e.g. latest, gitops-1.14).",
      "x-doc-url": "https://docs.openshift.com/gitops/latest/installing_gitops/installing-openshift-gitops.html"
    },
    "approval": {
      "title": "Install Plan Approval",
      "type": "string",
      "enum": [
        "Automatic",
        "Manual"
      ],
      "default": "Automatic",
      "description": "InstallPlan approval strategy. Automatic installs updates immediately; Manual requires admin approval."
    },
    "source": {
      "title": "Catalog Source",
      "type": "string",
      "default": "redhat-operators",
      "description": "OLM CatalogSource name. Override for disconnected or custom catalogs."
    },
    "ha": {
      "title": "High Availability",
      "type": "boolean",
      "default": false,
      "description": "Enable HA for ArgoCD components (multiple replicas for server, repo, and controller).",
      "x-doc-url": "https://docs.openshift.com/gitops/latest/argocd_instance/setting-up-argocd-instance.html"
    },
    "rbac": {
      "title": "RBAC",
      "type": "object",
      "description": "ArgoCD role-based access control configuration.",
      "x-doc-url": "https://argo-cd.readthedocs.io/en/stable/operator-manual/rbac/",
      "properties": {
        "policy": {
          "title": "Policy CSV",
          "type": "string",
          "default": "g, system:cluster-admins, role:admin",
          "description": "ArgoCD RBAC policy in CSV format. Maps groups/users to ArgoCD roles."
        },
        "defaultPolicy": {
          "title": "Default Policy",
          "type": "string",
          "default": "role:readonly",
          "description": "Default role for authenticated users not matching any policy rule."
        },
        "scopes": {
          "title": "Scopes",
          "type": "string",
          "default": "[groups]",
          "description": "OIDC scopes used for RBAC group matching."
        }
      },
      "additionalProperties": false
    },
    "repo": {
      "title": "Repo Server",
      "type": "object",
      "description": "ArgoCD repo server configuration for Git repository operations.",
      "x-doc-url": "https://argo-cd.readthedocs.io/en/stable/operator-manual/argocd-repo-server/",
      "properties": {
        "resources": {
          "title": "Resources",
          "type": "object",
          "description": "CPU and memory resource limits for the repo server.",
          "properties": {
            "cpu": {
              "title": "CPU Limit",
              "type": "string",
              "default": "1",
              "description": "CPU limit for the repo server container (e.g. 1, 500m, 2)."
            },
            "memory": {
              "title": "Memory Limit",
              "type": "string",
              "default": "1Gi",
              "description": "Memory limit for the repo server container (e.g. 512Mi, 1Gi, 2Gi)."
            }
          }
        }
      },
      "additionalProperties": true
    },
    "notifications": {
      "title": "Notifications",
      "type": "boolean",
      "default": true,
      "description": "Enable the ArgoCD notifications controller for event-driven alerts (Slack, email, webhooks).",
      "x-doc-url": "https://argo-cd.readthedocs.io/en/stable/operator-manual/notifications/"
    },
    "applicationSet": {
      "title": "ApplicationSet",
      "type": "boolean",
      "default": true,
      "description": "Enable the ApplicationSet controller for templated multi-cluster Application generation.",
      "x-doc-url": "https://argo-cd.readthedocs.io/en/stable/operator-manual/applicationset/"
    },
    "bootstrap": {
      "title": "Bootstrap Application",
      "type": "object",
      "description": "App-of-apps bootstrap Application that manages further operators and configuration from a Git repository.",
      "x-doc-url": "https://argo-cd.readthedocs.io/en/stable/operator-manual/cluster-bootstrapping/",
      "properties": {
        "repoURL": {
          "title": "Repository URL",
          "type": "string",
          "description": "Git repository URL containing the app-of-apps manifests."
        },
        "path": {
          "title": "Path",
          "type": "string",
          "default": ".",
          "description": "Path within the repository to the Application manifests."
        },
        "targetRevision": {
          "title": "Target Revision",
          "type": "string",
          "default": "HEAD",
          "description": "Git reference to track: branch name, tag, or commit SHA."
        },
        "namespace": {
          "title": "Destination Namespace",
          "type": "string",
          "default": "openshift-gitops",
          "description": "Kubernetes namespace where bootstrapped resources are created."
        },
        "autoSync": {
          "title": "Auto Sync",
          "type": "boolean",
          "default": true,
          "description": "Enable automated sync with pruning and self-heal. When true, changes in Git are automatically applied."
        }
      },
      "required": [
        "repoURL"
      ],
      "additionalProperties": false
    }
  },
  "additionalProperties": true
}
